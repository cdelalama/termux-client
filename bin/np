#!/data/data/com.termux/files/usr/bin/bash
set -euo pipefail

CFG_FILE="$HOME/.config/termux-client/config"
# shellcheck disable=SC1090
source "$CFG_FILE"

read -r -p "Repo name: " NAME
NAME="$(echo "$NAME" | tr '[:upper:]' '[:lower:]' | sed -E 's/[^a-z0-9 -]//g; s/[ ]+/-/g; s/[ ]+/-/g; s/^-+|-+$//g')"
[[ -n "$NAME" ]] || { echo "Empty name"; exit 2; }

exec ssh -t "$HOST" "newproj $NAME private --tmux"
